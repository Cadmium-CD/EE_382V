/*
 * wallace.cpp
 *
 *  Created on: Apr 26, 2020
 *      Author: diche
 */

#include <iostream>
#include <cstdlib>
#include <tuple>
#include "module.h"
using namespace std;

int wallace_acc(int A,int B){
    int sum = 0;
	int ground_z = 0;
	int a[16],b[16];
	for(int i=0;i<16;i++){
		a[i] = (A>> i) & 0x1;
		b[i] = (B >>i) & 0x1;
	}
	//-------------------------------------------AND layer---------------------------------------//
	int P_0_0;
	int P_0_1;
	int P_0_2;
	int P_0_3;
	int P_0_4;
	int P_0_5;
	int P_0_6;
	int P_0_7;
	int P_0_8;
	int P_0_9;
	int P_0_10;
	int P_0_11;
	int P_0_12;
	int P_0_13;
	int P_0_14;
	int P_0_15;
	int P_1_0;
	int P_1_1;
	int P_1_2;
	int P_1_3;
	int P_1_4;
	int P_1_5;
	int P_1_6;
	int P_1_7;
	int P_1_8;
	int P_1_9;
	int P_1_10;
	int P_1_11;
	int P_1_12;
	int P_1_13;
	int P_1_14;
	int P_1_15;
	int P_2_0;
	int P_2_1;
	int P_2_2;
	int P_2_3;
	int P_2_4;
	int P_2_5;
	int P_2_6;
	int P_2_7;
	int P_2_8;
	int P_2_9;
	int P_2_10;
	int P_2_11;
	int P_2_12;
	int P_2_13;
	int P_2_14;
	int P_2_15;
	int P_3_0;
	int P_3_1;
	int P_3_2;
	int P_3_3;
	int P_3_4;
	int P_3_5;
	int P_3_6;
	int P_3_7;
	int P_3_8;
	int P_3_9;
	int P_3_10;
	int P_3_11;
	int P_3_12;
	int P_3_13;
	int P_3_14;
	int P_3_15;
	int P_4_0;
	int P_4_1;
	int P_4_2;
	int P_4_3;
	int P_4_4;
	int P_4_5;
	int P_4_6;
	int P_4_7;
	int P_4_8;
	int P_4_9;
	int P_4_10;
	int P_4_11;
	int P_4_12;
	int P_4_13;
	int P_4_14;
	int P_4_15;
	int P_5_0;
	int P_5_1;
	int P_5_2;
	int P_5_3;
	int P_5_4;
	int P_5_5;
	int P_5_6;
	int P_5_7;
	int P_5_8;
	int P_5_9;
	int P_5_10;
	int P_5_11;
	int P_5_12;
	int P_5_13;
	int P_5_14;
	int P_5_15;
	int P_6_0;
	int P_6_1;
	int P_6_2;
	int P_6_3;
	int P_6_4;
	int P_6_5;
	int P_6_6;
	int P_6_7;
	int P_6_8;
	int P_6_9;
	int P_6_10;
	int P_6_11;
	int P_6_12;
	int P_6_13;
	int P_6_14;
	int P_6_15;
	int P_7_0;
	int P_7_1;
	int P_7_2;
	int P_7_3;
	int P_7_4;
	int P_7_5;
	int P_7_6;
	int P_7_7;
	int P_7_8;
	int P_7_9;
	int P_7_10;
	int P_7_11;
	int P_7_12;
	int P_7_13;
	int P_7_14;
	int P_7_15;
	int P_8_0;
	int P_8_1;
	int P_8_2;
	int P_8_3;
	int P_8_4;
	int P_8_5;
	int P_8_6;
	int P_8_7;
	int P_8_8;
	int P_8_9;
	int P_8_10;
	int P_8_11;
	int P_8_12;
	int P_8_13;
	int P_8_14;
	int P_8_15;
	int P_9_0;
	int P_9_1;
	int P_9_2;
	int P_9_3;
	int P_9_4;
	int P_9_5;
	int P_9_6;
	int P_9_7;
	int P_9_8;
	int P_9_9;
	int P_9_10;
	int P_9_11;
	int P_9_12;
	int P_9_13;
	int P_9_14;
	int P_9_15;
	int P_10_0;
	int P_10_1;
	int P_10_2;
	int P_10_3;
	int P_10_4;
	int P_10_5;
	int P_10_6;
	int P_10_7;
	int P_10_8;
	int P_10_9;
	int P_10_10;
	int P_10_11;
	int P_10_12;
	int P_10_13;
	int P_10_14;
	int P_10_15;
	int P_11_0;
	int P_11_1;
	int P_11_2;
	int P_11_3;
	int P_11_4;
	int P_11_5;
	int P_11_6;
	int P_11_7;
	int P_11_8;
	int P_11_9;
	int P_11_10;
	int P_11_11;
	int P_11_12;
	int P_11_13;
	int P_11_14;
	int P_11_15;
	int P_12_0;
	int P_12_1;
	int P_12_2;
	int P_12_3;
	int P_12_4;
	int P_12_5;
	int P_12_6;
	int P_12_7;
	int P_12_8;
	int P_12_9;
	int P_12_10;
	int P_12_11;
	int P_12_12;
	int P_12_13;
	int P_12_14;
	int P_12_15;
	int P_13_0;
	int P_13_1;
	int P_13_2;
	int P_13_3;
	int P_13_4;
	int P_13_5;
	int P_13_6;
	int P_13_7;
	int P_13_8;
	int P_13_9;
	int P_13_10;
	int P_13_11;
	int P_13_12;
	int P_13_13;
	int P_13_14;
	int P_13_15;
	int P_14_0;
	int P_14_1;
	int P_14_2;
	int P_14_3;
	int P_14_4;
	int P_14_5;
	int P_14_6;
	int P_14_7;
	int P_14_8;
	int P_14_9;
	int P_14_10;
	int P_14_11;
	int P_14_12;
	int P_14_13;
	int P_14_14;
	int P_14_15;
	int P_15_0;
	int P_15_1;
	int P_15_2;
	int P_15_3;
	int P_15_4;
	int P_15_5;
	int P_15_6;
	int P_15_7;
	int P_15_8;
	int P_15_9;
	int P_15_10;
	int P_15_11;
	int P_15_12;
	int P_15_13;
	int P_15_14;
	int P_15_15;

	P_0_0= a[0] & b[0];
	P_0_1= a[0] & b[1];
	P_0_2= a[0] & b[2];
	P_0_3= a[0] & b[3];
	P_0_4= a[0] & b[4];
	P_0_5= a[0] & b[5];
	P_0_6= a[0] & b[6];
	P_0_7= a[0] & b[7];
	P_0_8= a[0] & b[8];
	P_0_9= a[0] & b[9];
	P_0_10= a[0] & b[10];
	P_0_11= a[0] & b[11];
	P_0_12= a[0] & b[12];
	P_0_13= a[0] & b[13];
	P_0_14= a[0] & b[14];
	P_0_15= a[0] & b[15];
	P_1_0= a[1] & b[0];
	P_1_1= a[1] & b[1];
	P_1_2= a[1] & b[2];
	P_1_3= a[1] & b[3];
	P_1_4= a[1] & b[4];
	P_1_5= a[1] & b[5];
	P_1_6= a[1] & b[6];
	P_1_7= a[1] & b[7];
	P_1_8= a[1] & b[8];
	P_1_9= a[1] & b[9];
	P_1_10= a[1] & b[10];
	P_1_11= a[1] & b[11];
	P_1_12= a[1] & b[12];
	P_1_13= a[1] & b[13];
	P_1_14= a[1] & b[14];
	P_1_15= a[1] & b[15];
	P_2_0= a[2] & b[0];
	P_2_1= a[2] & b[1];
	P_2_2= a[2] & b[2];
	P_2_3= a[2] & b[3];
	P_2_4= a[2] & b[4];
	P_2_5= a[2] & b[5];
	P_2_6= a[2] & b[6];
	P_2_7= a[2] & b[7];
	P_2_8= a[2] & b[8];
	P_2_9= a[2] & b[9];
	P_2_10= a[2] & b[10];
	P_2_11= a[2] & b[11];
	P_2_12= a[2] & b[12];
	P_2_13= a[2] & b[13];
	P_2_14= a[2] & b[14];
	P_2_15= a[2] & b[15];
	P_3_0= a[3] & b[0];
	P_3_1= a[3] & b[1];
	P_3_2= a[3] & b[2];
	P_3_3= a[3] & b[3];
	P_3_4= a[3] & b[4];
	P_3_5= a[3] & b[5];
	P_3_6= a[3] & b[6];
	P_3_7= a[3] & b[7];
	P_3_8= a[3] & b[8];
	P_3_9= a[3] & b[9];
	P_3_10= a[3] & b[10];
	P_3_11= a[3] & b[11];
	P_3_12= a[3] & b[12];
	P_3_13= a[3] & b[13];
	P_3_14= a[3] & b[14];
	P_3_15= a[3] & b[15];
	P_4_0= a[4] & b[0];
	P_4_1= a[4] & b[1];
	P_4_2= a[4] & b[2];
	P_4_3= a[4] & b[3];
	P_4_4= a[4] & b[4];
	P_4_5= a[4] & b[5];
	P_4_6= a[4] & b[6];
	P_4_7= a[4] & b[7];
	P_4_8= a[4] & b[8];
	P_4_9= a[4] & b[9];
	P_4_10= a[4] & b[10];
	P_4_11= a[4] & b[11];
	P_4_12= a[4] & b[12];
	P_4_13= a[4] & b[13];
	P_4_14= a[4] & b[14];
	P_4_15= a[4] & b[15];
	P_5_0= a[5] & b[0];
	P_5_1= a[5] & b[1];
	P_5_2= a[5] & b[2];
	P_5_3= a[5] & b[3];
	P_5_4= a[5] & b[4];
	P_5_5= a[5] & b[5];
	P_5_6= a[5] & b[6];
	P_5_7= a[5] & b[7];
	P_5_8= a[5] & b[8];
	P_5_9= a[5] & b[9];
	P_5_10= a[5] & b[10];
	P_5_11= a[5] & b[11];
	P_5_12= a[5] & b[12];
	P_5_13= a[5] & b[13];
	P_5_14= a[5] & b[14];
	P_5_15= a[5] & b[15];
	P_6_0= a[6] & b[0];
	P_6_1= a[6] & b[1];
	P_6_2= a[6] & b[2];
	P_6_3= a[6] & b[3];
	P_6_4= a[6] & b[4];
	P_6_5= a[6] & b[5];
	P_6_6= a[6] & b[6];
	P_6_7= a[6] & b[7];
	P_6_8= a[6] & b[8];
	P_6_9= a[6] & b[9];
	P_6_10= a[6] & b[10];
	P_6_11= a[6] & b[11];
	P_6_12= a[6] & b[12];
	P_6_13= a[6] & b[13];
	P_6_14= a[6] & b[14];
	P_6_15= a[6] & b[15];
	P_7_0= a[7] & b[0];
	P_7_1= a[7] & b[1];
	P_7_2= a[7] & b[2];
	P_7_3= a[7] & b[3];
	P_7_4= a[7] & b[4];
	P_7_5= a[7] & b[5];
	P_7_6= a[7] & b[6];
	P_7_7= a[7] & b[7];
	P_7_8= a[7] & b[8];
	P_7_9= a[7] & b[9];
	P_7_10= a[7] & b[10];
	P_7_11= a[7] & b[11];
	P_7_12= a[7] & b[12];
	P_7_13= a[7] & b[13];
	P_7_14= a[7] & b[14];
	P_7_15= a[7] & b[15];
	P_8_0= a[8] & b[0];
	P_8_1= a[8] & b[1];
	P_8_2= a[8] & b[2];
	P_8_3= a[8] & b[3];
	P_8_4= a[8] & b[4];
	P_8_5= a[8] & b[5];
	P_8_6= a[8] & b[6];
	P_8_7= a[8] & b[7];
	P_8_8= a[8] & b[8];
	P_8_9= a[8] & b[9];
	P_8_10= a[8] & b[10];
	P_8_11= a[8] & b[11];
	P_8_12= a[8] & b[12];
	P_8_13= a[8] & b[13];
	P_8_14= a[8] & b[14];
	P_8_15= a[8] & b[15];
	P_9_0= a[9] & b[0];
	P_9_1= a[9] & b[1];
	P_9_2= a[9] & b[2];
	P_9_3= a[9] & b[3];
	P_9_4= a[9] & b[4];
	P_9_5= a[9] & b[5];
	P_9_6= a[9] & b[6];
	P_9_7= a[9] & b[7];
	P_9_8= a[9] & b[8];
	P_9_9= a[9] & b[9];
	P_9_10= a[9] & b[10];
	P_9_11= a[9] & b[11];
	P_9_12= a[9] & b[12];
	P_9_13= a[9] & b[13];
	P_9_14= a[9] & b[14];
	P_9_15= a[9] & b[15];
	P_10_0= a[10] & b[0];
	P_10_1= a[10] & b[1];
	P_10_2= a[10] & b[2];
	P_10_3= a[10] & b[3];
	P_10_4= a[10] & b[4];
	P_10_5= a[10] & b[5];
	P_10_6= a[10] & b[6];
	P_10_7= a[10] & b[7];
	P_10_8= a[10] & b[8];
	P_10_9= a[10] & b[9];
	P_10_10= a[10] & b[10];
	P_10_11= a[10] & b[11];
	P_10_12= a[10] & b[12];
	P_10_13= a[10] & b[13];
	P_10_14= a[10] & b[14];
	P_10_15= a[10] & b[15];
	P_11_0= a[11] & b[0];
	P_11_1= a[11] & b[1];
	P_11_2= a[11] & b[2];
	P_11_3= a[11] & b[3];
	P_11_4= a[11] & b[4];
	P_11_5= a[11] & b[5];
	P_11_6= a[11] & b[6];
	P_11_7= a[11] & b[7];
	P_11_8= a[11] & b[8];
	P_11_9= a[11] & b[9];
	P_11_10= a[11] & b[10];
	P_11_11= a[11] & b[11];
	P_11_12= a[11] & b[12];
	P_11_13= a[11] & b[13];
	P_11_14= a[11] & b[14];
	P_11_15= a[11] & b[15];
	P_12_0= a[12] & b[0];
	P_12_1= a[12] & b[1];
	P_12_2= a[12] & b[2];
	P_12_3= a[12] & b[3];
	P_12_4= a[12] & b[4];
	P_12_5= a[12] & b[5];
	P_12_6= a[12] & b[6];
	P_12_7= a[12] & b[7];
	P_12_8= a[12] & b[8];
	P_12_9= a[12] & b[9];
	P_12_10= a[12] & b[10];
	P_12_11= a[12] & b[11];
	P_12_12= a[12] & b[12];
	P_12_13= a[12] & b[13];
	P_12_14= a[12] & b[14];
	P_12_15= a[12] & b[15];
	P_13_0= a[13] & b[0];
	P_13_1= a[13] & b[1];
	P_13_2= a[13] & b[2];
	P_13_3= a[13] & b[3];
	P_13_4= a[13] & b[4];
	P_13_5= a[13] & b[5];
	P_13_6= a[13] & b[6];
	P_13_7= a[13] & b[7];
	P_13_8= a[13] & b[8];
	P_13_9= a[13] & b[9];
	P_13_10= a[13] & b[10];
	P_13_11= a[13] & b[11];
	P_13_12= a[13] & b[12];
	P_13_13= a[13] & b[13];
	P_13_14= a[13] & b[14];
	P_13_15= a[13] & b[15];
	P_14_0= a[14] & b[0];
	P_14_1= a[14] & b[1];
	P_14_2= a[14] & b[2];
	P_14_3= a[14] & b[3];
	P_14_4= a[14] & b[4];
	P_14_5= a[14] & b[5];
	P_14_6= a[14] & b[6];
	P_14_7= a[14] & b[7];
	P_14_8= a[14] & b[8];
	P_14_9= a[14] & b[9];
	P_14_10= a[14] & b[10];
	P_14_11= a[14] & b[11];
	P_14_12= a[14] & b[12];
	P_14_13= a[14] & b[13];
	P_14_14= a[14] & b[14];
	P_14_15= a[14] & b[15];
	P_15_0= a[15] & b[0];
	P_15_1= a[15] & b[1];
	P_15_2= a[15] & b[2];
	P_15_3= a[15] & b[3];
	P_15_4= a[15] & b[4];
	P_15_5= a[15] & b[5];
	P_15_6= a[15] & b[6];
	P_15_7= a[15] & b[7];
	P_15_8= a[15] & b[8];
	P_15_9= a[15] & b[9];
	P_15_10= a[15] & b[10];
	P_15_11= a[15] & b[11];
	P_15_12= a[15] & b[12];
	P_15_13= a[15] & b[13];
	P_15_14= a[15] & b[14];
	P_15_15= a[15] & b[15];
	//-------------------------------------------layer 1---------------------------------------//
	int SH_1;
	int SH_2;
	int SH_3;
	int SH_4;

	int CH_1;
	int CH_2;
	int CH_3;
	int CH_4;

	int SF_1;
	int SF_2;
	int SF_3;
	int SF_4;
	int SF_5;
	int SF_6;
	int SF_7;
	int SF_8;

	int CF_1;
	int CF_2;
	int CF_3;
	int CF_4;
	int CF_5;
	int CF_6;
	int CF_7;
	int CF_8;

	int SC_1;
	int SC_2;
	int SC_3;
	int SC_4;
	int SC_5;
	int SC_6;
	int SC_7;
	int SC_8;
	int SC_9;
	int SC_10;
	int SC_11;
	int SC_12;
	int SC_13;
	int SC_14;
	int SC_15;
	int SC_16;
	int SC_17;
	int SC_18;
	int SC_19;
	int SC_20;
	int SC_21;
	int SC_22;
	int SC_23;
	int SC_24;
	int SC_25;
	int SC_26;
	int SC_27;
	int SC_28;
	int SC_29;
	int SC_30;
	int SC_31;
	int SC_32;
	int SC_33;
	int SC_34;
	int SC_35;
	int SC_36;
	int SC_37;
	int SC_38;
	int SC_39;
	int SC_40;
	int SC_41;
	int SC_42;
	int SC_43;
	int SC_44;
	int SC_45;
	int SC_46;
	int SC_47;
	int SC_48;
	int SC_49;
	int SC_50;
	int SC_51;
	int SC_52;
	int SC_53;
	int SC_54;
	int SC_55;
	int SC_56;

	int CC_1;
	int CC_2;
	int CC_3;
	int CC_4;
	int CC_5;
	int CC_6;
	int CC_7;
	int CC_8;
	int CC_9;
	int CC_10;
	int CC_11;
	int CC_12;
	int CC_13;
	int CC_14;
	int CC_15;
	int CC_16;
	int CC_17;
	int CC_18;
	int CC_19;
	int CC_20;
	int CC_21;
	int CC_22;
	int CC_23;
	int CC_24;
	int CC_25;
	int CC_26;
	int CC_27;
	int CC_28;
	int CC_29;
	int CC_30;
	int CC_31;
	int CC_32;
	int CC_33;
	int CC_34;
	int CC_35;
	int CC_36;
	int CC_37;
	int CC_38;
	int CC_39;
	int CC_40;
	int CC_41;
	int CC_42;
	int CC_43;
	int CC_44;
	int CC_45;
	int CC_46;
	int CC_47;
	int CC_48;
	int CC_49;
	int CC_50;
	int CC_51;
	int CC_52;
	int CC_53;
	int CC_54;
	int CC_55;
	int CC_56;

	int CO_1;
	int CO_2;
	int CO_3;
	int CO_4;
	int CO_5;
	int CO_6;
	int CO_7;
	int CO_8;
	int CO_9;
	int CO_10;
	int CO_11;
	int CO_12;
	int CO_13;
	int CO_14;
	int CO_15;
	int CO_16;
	int CO_17;
	int CO_18;
	int CO_19;
	int CO_20;
	int CO_21;
	int CO_22;
	int CO_23;
	int CO_24;
	int CO_25;
	int CO_26;
	int CO_27;
	int CO_28;
	int CO_29;
	int CO_30;
	int CO_31;
	int CO_32;
	int CO_33;
	int CO_34;
	int CO_35;
	int CO_36;
	int CO_37;
	int CO_38;
	int CO_39;
	int CO_40;
	int CO_41;
	int CO_42;
	int CO_43;
	int CO_44;
	int CO_45;
	int CO_46;
	int CO_47;
	int CO_48;
	int CO_49;
	int CO_50;
	int CO_51;
	int CO_52;
	int CO_53;
	int CO_54;
	int CO_55;
	int CO_56;

	//half adder
	tie(SH_1, CH_1)=ha( P_0_1, P_1_0);
	tie(SH_2, CH_2)=ha( P_1_4, P_0_5);
	tie(SH_3, CH_3)=ha( P_1_8, P_0_9);
	tie(SH_4, CH_4)=ha( P_1_12, P_0_13);

	//full adder
	tie(SF_1, CF_1)= fa(P_2_0, P_1_1, P_0_2);
	tie(SF_3, CF_3)= fa(P_2_4, P_1_5, P_0_6);
	tie(SF_5, CF_5)= fa(P_2_8, P_1_9, P_0_10);
	tie(SF_7, CF_7)= fa(P_2_12, P_1_13, P_0_14);

	//compressor;
	tie(SC_1,CO_1,CC_1)=cp_acc(P_3_0,P_2_1,P_1_2,P_0_3,ground_z);
	tie(SC_2,CO_2,CC_2)=cp_acc(P_4_0,P_3_1,P_2_2,P_1_3,CO_1);
	tie(SC_3,CO_3,CC_3)=cp_acc(P_5_0,P_4_1,P_3_2,P_2_3,CO_2);
	tie(SC_4,CO_4,CC_4)=cp_acc(P_6_0,P_5_1,P_4_2,P_3_3,CO_3);
	tie(SC_5,CO_5,CC_5)=cp_acc(P_7_0,P_6_1,P_5_2,P_4_3,CO_4);
	tie(SC_6,CO_6,CC_6)=cp_acc(P_8_0,P_7_1,P_6_2,P_5_3,CO_5);
	tie(SC_7,CO_7,CC_7)=cp_acc(P_9_0,P_8_1,P_7_2,P_6_3,CO_6);
	tie(SC_8,CO_8,CC_8)=cp_acc(P_10_0,P_9_1,P_8_2,P_7_3,CO_7);
	tie(SC_9,CO_9,CC_9)=cp_acc(P_11_0,P_10_1,P_9_2,P_8_3,CO_8);
	tie(SC_10,CO_10,CC_10)=cp_acc(P_12_0,P_11_1,P_10_2,P_9_3,CO_9);
	tie(SC_11,CO_11,CC_11)=cp_acc(P_13_0,P_12_1,P_11_2,P_10_3,CO_10);
	tie(SC_12,CO_12,CC_12)=cp_acc(P_14_0,P_13_1,P_12_2,P_11_3,CO_11);
	tie(SC_13,CO_13,CC_13)=cp_acc(P_15_0,P_14_1,P_13_2,P_12_3,CO_12);
	tie(SC_14,CO_14,CC_14)=cp_acc(P_15_1,P_14_2,P_13_3,ground_z,CO_13);
	tie(SC_15,CO_15,CC_15)=cp_acc(P_3_4,P_2_5,P_1_6,P_0_7,ground_z);
	tie(SC_16,CO_16,CC_16)=cp_acc(P_4_4,P_3_5,P_2_6,P_1_7,CO_15);
	tie(SC_17,CO_17,CC_17)=cp_acc(P_5_4,P_4_5,P_3_6,P_2_7,CO_16);
	tie(SC_18,CO_18,CC_18)=cp_acc(P_6_4,P_5_5,P_4_6,P_3_7,CO_17);
	tie(SC_19,CO_19,CC_19)=cp_acc(P_7_4,P_6_5,P_5_6,P_4_7,CO_18);
	tie(SC_20,CO_20,CC_20)=cp_acc(P_8_4,P_7_5,P_6_6,P_5_7,CO_19);
	tie(SC_21,CO_21,CC_21)=cp_acc(P_9_4,P_8_5,P_7_6,P_6_7,CO_20);
	tie(SC_22,CO_22,CC_22)=cp_acc(P_10_4,P_9_5,P_8_6,P_7_7,CO_21);
	tie(SC_23,CO_23,CC_23)=cp_acc(P_11_4,P_10_5,P_9_6,P_8_7,CO_22);
	tie(SC_24,CO_24,CC_24)=cp_acc(P_12_4,P_11_5,P_10_6,P_9_7,CO_23);
	tie(SC_25,CO_25,CC_25)=cp_acc(P_13_4,P_12_5,P_11_6,P_10_7,CO_24);
	tie(SC_26,CO_26,CC_26)=cp_acc(P_14_4,P_13_5,P_12_6,P_11_7,CO_25);
	tie(SC_27,CO_27,CC_27)=cp_acc(P_15_4,P_14_5,P_13_6,P_12_7,CO_26);
	tie(SC_28,CO_28,CC_28)=cp_acc(P_15_5,P_14_6,P_13_7,ground_z,CO_27);
	tie(SC_29,CO_29,CC_29)=cp_acc(P_3_8,P_2_9,P_1_10,P_0_11,ground_z);
	tie(SC_30,CO_30,CC_30)=cp_acc(P_4_8,P_3_9,P_2_10,P_1_11,CO_29);
	tie(SC_31,CO_31,CC_31)=cp_acc(P_5_8,P_4_9,P_3_10,P_2_11,CO_30);
	tie(SC_32,CO_32,CC_32)=cp_acc(P_6_8,P_5_9,P_4_10,P_3_11,CO_31);
	tie(SC_33,CO_33,CC_33)=cp_acc(P_7_8,P_6_9,P_5_10,P_4_11,CO_32);
	tie(SC_34,CO_34,CC_34)=cp_acc(P_8_8,P_7_9,P_6_10,P_5_11,CO_33);
	tie(SC_35,CO_35,CC_35)=cp_acc(P_9_8,P_8_9,P_7_10,P_6_11,CO_34);
	tie(SC_36,CO_36,CC_36)=cp_acc(P_10_8,P_9_9,P_8_10,P_7_11,CO_35);
	tie(SC_37,CO_37,CC_37)=cp_acc(P_11_8,P_10_9,P_9_10,P_8_11,CO_36);
	tie(SC_38,CO_38,CC_38)=cp_acc(P_12_8,P_11_9,P_10_10,P_9_11,CO_37);
	tie(SC_39,CO_39,CC_39)=cp_acc(P_13_8,P_12_9,P_11_10,P_10_11,CO_38);
	tie(SC_40,CO_40,CC_40)=cp_acc(P_14_8,P_13_9,P_12_10,P_11_11,CO_39);
	tie(SC_41,CO_41,CC_41)=cp_acc(P_15_8,P_14_9,P_13_10,P_12_11,CO_40);
	tie(SC_42,CO_42,CC_42)=cp_acc(P_15_9,P_14_10,P_13_11,ground_z,CO_41);
	tie(SC_43,CO_43,CC_43)=cp_acc(P_3_12,P_2_13,P_1_14,P_0_15,ground_z);
	tie(SC_44,CO_44,CC_44)=cp_acc(P_4_12,P_3_13,P_2_14,P_1_15,CO_43);
	tie(SC_45,CO_45,CC_45)=cp_acc(P_5_12,P_4_13,P_3_14,P_2_15,CO_44);
	tie(SC_46,CO_46,CC_46)=cp_acc(P_6_12,P_5_13,P_4_14,P_3_15,CO_45);
	tie(SC_47,CO_47,CC_47)=cp_acc(P_7_12,P_6_13,P_5_14,P_4_15,CO_46);
	tie(SC_48,CO_48,CC_48)=cp_acc(P_8_12,P_7_13,P_6_14,P_5_15,CO_47);
	tie(SC_49,CO_49,CC_49)=cp_acc(P_9_12,P_8_13,P_7_14,P_6_15,CO_48);
	tie(SC_50,CO_50,CC_50)=cp_acc(P_10_12,P_9_13,P_8_14,P_7_15,CO_49);
	tie(SC_51,CO_51,CC_51)=cp_acc(P_11_12,P_10_13,P_9_14,P_8_15,CO_50);
	tie(SC_52,CO_52,CC_52)=cp_acc(P_12_12,P_11_13,P_10_14,P_9_15,CO_51);
	tie(SC_53,CO_53,CC_53)=cp_acc(P_13_12,P_12_13,P_11_14,P_10_15,CO_52);
	tie(SC_54,CO_54,CC_54)=cp_acc(P_14_12,P_13_13,P_12_14,P_11_15,CO_53);
	tie(SC_55,CO_55,CC_55)=cp_acc(P_15_12,P_14_13,P_13_14,P_12_15,CO_54);
	tie(SC_56,CO_56,CC_56)=cp_acc(P_15_13,P_14_14,P_13_15,ground_z,CO_55);

	tie(SF_2, CF_2)= fa(P_15_2, P_14_3, CO_14);
	tie(SF_4, CF_4)= fa(P_15_6, P_14_7, CO_28);
	tie(SF_6, CF_6)= fa(P_15_10, P_14_11, CO_42);
	tie(SF_8, CF_8)= fa(P_15_14, P_14_15, CO_56);
	//-------------------------------------------layer 2---------------------------------------//
	int SH_5;
	int SH_6;
	int SH_7;
	int SH_8;
	int SH_9;
	int SH_10;
	int SH_11;
	int SH_12;
	int SH_13;
	int SH_14;

	int CH_5;
	int CH_6;
	int CH_7;
	int CH_8;
	int CH_9;
	int CH_10;
	int CH_11;
	int CH_12;
	int CH_13;
	int CH_14;

	int SF_9;
	int SF_10;
	int SF_11;
	int SF_12;
	int SF_13;
	int SF_14;

	int CF_9;
	int CF_10;
	int CF_11;
	int CF_12;
	int CF_13;
	int CF_14;

	int SC_57;
	int SC_58;
	int SC_59;
	int SC_60;
	int SC_61;
	int SC_62;
	int SC_63;
	int SC_64;
	int SC_65;
	int SC_66;
	int SC_67;
	int SC_68;
	int SC_69;
	int SC_70;
	int SC_71;
	//int SC_72;
	int SC_73;
	int SC_74;
	int SC_75;
	int SC_76;
	int SC_77;
	int SC_78;
	int SC_79;
	int SC_80;
	int SC_81;
	int SC_82;
	int SC_83;

	int CC_57;
	int CC_58;
	int CC_59;
	int CC_60;
	int CC_61;
	int CC_62;
	int CC_63;
	int CC_64;
	int CC_65;
	int CC_66;
	int CC_67;
	int CC_68;
	int CC_69;
	int CC_70;
	int CC_71;
	//int CC_72;
	int CC_73;
	int CC_74;
	int CC_75;
	int CC_76;
	int CC_77;
	int CC_78;
	int CC_79;
	int CC_80;
	int CC_81;
	int CC_82;
	int CC_83;

	int CO_57;
	int CO_58;
	int CO_59;
	int CO_60;
	int CO_61;
	int CO_62;
	int CO_63;
	int CO_64;
	int CO_65;
	int CO_66;
	int CO_67;
	int CO_68;
	int CO_69;
	int CO_70;
	int CO_71;
	//int CO_72;
	int CO_73;
	int CO_74;
	int CO_75;
	int CO_76;
	int CO_77;
	int CO_78;
	int CO_79;
	int CO_80;
	int CO_81;
	int CO_82;
	int CO_83;


	//half adder

	tie(SH_5, CH_5)=ha( SF_1, CH_1);
	tie(SH_6, CH_6)=ha( SC_1, CF_1);
	tie(SH_7, CH_7)=ha( SC_28, CC_27);
	tie(SH_8, CH_8)=ha( SF_4, CC_28);
	tie(SH_9, CH_9)=ha( CF_4, P_15_7);
	tie(SH_10, CH_10)= ha(SF_5, CH_3);
	tie(SH_11, CH_11)= ha(SC_29, CF_5);
	tie(SH_12, CH_12)= ha(SC_56, CC_55);
	tie(SH_13, CH_13)= ha(SF_8, CC_56);
	tie(SH_14, CH_14)= ha(CF_8, P_15_15);

	//full adder
	tie(SF_9, CF_9)=fa(SC_2, CC_1, P_0_4);
	tie(SF_10, CF_10)=fa( SC_3, CC_2, SH_2);
	tie(SF_12, CF_12)=fa( SC_30, CC_29, P_0_12);
	tie(SF_13, CF_13)=fa( SC_31, CC_30, SH_4);

 //compressor
	tie(SC_57,CO_57,CC_57)=cp_acc(SC_4,CC_3,SF_3,CH_2,ground_z);
	tie(SC_58,CO_58,CC_58)=cp_acc(SC_5,CC_4,SC_15,CF_3,CO_57);
	tie(SC_59,CO_59,CC_59)=cp_acc(SC_6,CC_5,SC_16,CC_15,CO_58);
	tie(SC_60,CO_60,CC_60)=cp_acc(SC_7,CC_6,SC_17,CC_16,CO_59);
	tie(SC_61,CO_61,CC_61)=cp_acc(SC_8,CC_7,SC_18,CC_17,CO_60);
	tie(SC_62,CO_62,CC_62)=cp_acc(SC_9,CC_8,SC_19,CC_18,CO_61);
	tie(SC_63,CO_63,CC_63)=cp_acc(SC_10,CC_9,SC_20,CC_19,CO_62);
	tie(SC_64,CO_64,CC_64)=cp_acc(SC_11,CC_10,SC_21,CC_20,CO_63);
	tie(SC_65,CO_65,CC_65)=cp_acc(SC_12,CC_11,SC_22,CC_21,CO_64);
	tie(SC_66,CO_66,CC_66)=cp_acc(SC_13,CC_12,SC_23,CC_22,CO_65);
	tie(SC_67,CO_67,CC_67)=cp_acc(SC_14,CC_13,SC_24,CC_23,CO_66);
	tie(SC_68,CO_68,CC_68)=cp_acc(SF_2,CC_14,SC_25,CC_24,CO_67);
	tie(SC_69,CO_69,CC_69)=cp_acc(CF_2,P_15_3,SC_26,CC_25,CO_68);
	tie(SC_70,CO_70,CC_70)=cp_acc(SC_32,CC_31,SF_7,CH_4,ground_z);
	tie(SC_71,CO_71,CC_71)=cp_acc(SC_33,CC_32,SC_43,CF_7,CO_70);
	//
	tie(SC_73,CO_73,CC_73)=cp_acc(SC_34,CC_33,SC_44,CC_43,CO_71);
	tie(SC_74,CO_74,CC_74)=cp_acc(SC_35,CC_34,SC_45,CC_44,CO_73);
	tie(SC_75,CO_75,CC_75)=cp_acc(SC_36,CC_35,SC_46,CC_45,CO_74);
	tie(SC_76,CO_76,CC_76)=cp_acc(SC_37,CC_36,SC_47,CC_46,CO_75);
	tie(SC_77,CO_77,CC_77)=cp_acc(SC_38,CC_37,SC_48,CC_47,CO_76);
	tie(SC_78,CO_78,CC_78)=cp_acc(SC_39,CC_38,SC_49,CC_48,CO_77);
	tie(SC_79,CO_79,CC_79)=cp_acc(SC_40,CC_39,SC_50,CC_49,CO_78);
	tie(SC_80,CO_80,CC_80)=cp_acc(SC_41,CC_40,SC_51,CC_50,CO_79);
	tie(SC_81,CO_81,CC_81)=cp_acc(SC_42,CC_41,SC_52,CC_51,CO_80);
	tie(SC_82,CO_82,CC_82)=cp_acc(SF_6,CC_42,SC_53,CC_52,CO_81);
	tie(SC_83,CO_83,CC_83)=cp_acc(CF_6,P_15_11,SC_54,CC_53,CO_82);

	tie(SF_11, CF_11)=fa( SC_27, CC_26, CO_69);
	tie(SF_14, CF_14)=fa( SC_55, CC_54, CO_83);

	//-------------------------------------------layer 3---------------------------------------//  ;
	int SH_15;
	int SH_16;
	int SH_17;
	int SH_18;
	int SH_19;
	int SH_20;
	int SH_21;
	int SH_22;
	int SH_23;
	int SH_24;
	int SH_25;


	int CH_15;
	int CH_16;
	int CH_17;
	int CH_18;
	int CH_19;
	int CH_20;
	int CH_21;
	int CH_22;
	int CH_23;
	int CH_24;
	int CH_25;

	int SF_15;
	int SF_16;
	int SF_17;
	int SF_18;

	int CF_15;
	int CF_16;
	int CF_17;
	int CF_18;

	int SC_84;
	int SC_85;
	int SC_86;
	int SC_87;
	int SC_88;
	int SC_89;
	int SC_90;
	int SC_91;
	int SC_92;
	int SC_93;
	int SC_94;
	int SC_95;
	int SC_96;

	int CC_84;
	int CC_85;
	int CC_86;
	int CC_87;
	int CC_88;
	int CC_89;
	int CC_90;
	int CC_91;
	int CC_92;
	int CC_93;
	int CC_94;
	int CC_95;
	int CC_96;

	int CO_84;
	int CO_85;
	int CO_86;
	int CO_87;
	int CO_88;
	int CO_89;
	int CO_90;
	int CO_91;
	int CO_92;
	int CO_93;
	int CO_94;
	int CO_95;
	int CO_96;


	//half adder

	tie(SH_15, CH_15)=ha( SH_6, CH_5);
	tie(SH_16, CH_16)=ha( SF_9, CH_6);
	tie(SH_17, CH_17)=ha( SF_10, CF_9);
	tie(SH_18, CH_18)=ha( SC_57, CF_10);
	tie(SH_19, CH_19)=ha( SC_58, CC_57);
	tie(SH_20, CH_20)=ha( SC_82, CC_81);
	tie(SH_21, CH_21)=ha( SC_83, CC_82);
	tie(SH_22, CH_22)=ha( SF_14, CC_83);
	tie(SH_23, CH_23)=ha( SH_12, CF_14);
	tie(SH_24, CH_24)=ha( SH_13, CH_12);
	tie(SH_25, CH_25)=ha( SH_14, CH_13);

	//full adder
	tie(SF_15, CF_15)=fa( SC_59, CC_58, P_0_8);
	tie(SF_16, CF_16)=fa( SC_60, CC_59, SH_3);
	tie(SF_17, CF_17)=fa( SC_61, CC_60, SH_10);

	tie(SC_84,CO_84,CC_84)=cp_acc(SC_62,CC_61,SH_11,CH_10,ground_z);
	tie(SC_85,CO_85,CC_85)=cp_acc(SC_63,CC_62,SF_12,CH_11,CO_84);
	tie(SC_86,CO_86,CC_86)=cp_acc(SC_64,CC_63,SF_13,CF_12,CO_85);
	tie(SC_87,CO_87,CC_87)=cp_acc(SC_65,CC_64,SC_70,CF_13,CO_86);
	tie(SC_88,CO_88,CC_88)=cp_acc(SC_66,CC_65,SC_71,CC_70,CO_87);
	tie(SC_89,CO_89,CC_89)=cp_acc(SC_67,CC_66,SC_73,CC_71,CO_88);
	tie(SC_90,CO_90,CC_90)=cp_acc(SC_68,CC_67,SC_74,CC_73,CO_89);
	tie(SC_91,CO_91,CC_91)=cp_acc(SC_69,CC_68,SC_75,CC_74,CO_90);
	tie(SC_92,CO_92,CC_92)=cp_acc(SF_11,CC_69,SC_76,CC_75,CO_91);
	tie(SC_93,CO_93,CC_93)=cp_acc(SH_7,CF_11,SC_77,CC_76,CO_92);
	tie(SC_94,CO_94,CC_94)=cp_acc(SH_8,CH_7,SC_78,CC_77,CO_93);
	tie(SC_95,CO_95,CC_95)=cp_acc(SH_9,CH_8,SC_79,CC_78,CO_94);
	tie(SC_96,CO_96,CC_96)=cp_acc(CH_9,SC_80,CC_79,ground_z,CO_95);

	tie(SF_18, CF_18)=fa( SC_81, CC_80, CO_96);

	//results
	int CF_26;
	int CF_27;
	int CF_28;
	int CF_29;
	int CF_30;
	int CF_31;
	int CF_32;
	int CF_33;
	int CF_34;
	int CF_35;
	int CF_36;
	int CF_37;
	int CF_38;
	int CF_39;
	int CF_40;
	int CF_41;
	int CF_42;
	int CF_43;
	int CF_44;
	int CF_45;
	int CF_46;
	int CF_47;
	int CF_48;
	int CF_49;
	int CF_50;
	int CF_51;
	int CF_52;
	int CF_53;

	int SF_26;
	int SF_27;
	int SF_28;
	int SF_29;
	int SF_30;
	int SF_31;
	int SF_32;
	int SF_33;
	int SF_34;
	int SF_35;
	int SF_36;
	int SF_37;
	int SF_38;
	int SF_39;
	int SF_40;
	int SF_41;
	int SF_42;
	int SF_43;
	int SF_44;
	int SF_45;
	int SF_46;
	int SF_47;
	int SF_48;
	int SF_49;
	int SF_50;
	int SF_51;
	int SF_52;
	int SF_53;

	tie(SF_26, CF_26)= ha(SH_16, CH_15);
	tie(SF_27, CF_27)= fa(SH_17, CH_16,CF_26);
	tie(SF_28, CF_28)= fa(SH_18, CH_17,CF_27);
	tie(SF_29, CF_29)= fa(SH_19, CH_18,CF_28);
	tie(SF_30, CF_30)= fa(SF_15, CH_19,CF_29);
	tie(SF_31, CF_31)= fa(SF_16, CF_15,CF_30);
	tie(SF_32, CF_32)= fa(SF_17, CF_16,CF_31);
	tie(SF_33, CF_33)= fa(SC_84, CF_17,CF_32);
	tie(SF_34, CF_34)= fa(SC_85, CC_84,CF_33);
	tie(SF_35, CF_35)= fa(SC_86, CC_85,CF_34);
	tie(SF_36, CF_36)= fa(SC_87, CC_86,CF_35);
	tie(SF_37, CF_37)= fa(SC_88, CC_87,CF_36);
	tie(SF_38, CF_38)= fa(SC_89, CC_88,CF_37);
	tie(SF_39, CF_39)= fa(SC_90, CC_89,CF_38);
	tie(SF_40, CF_40)= fa(SC_91, CC_90,CF_39);
	tie(SF_41, CF_41)= fa(SC_92, CC_91,CF_40);
	tie(SF_42, CF_42)= fa(SC_93, CC_92,CF_41);
	tie(SF_43, CF_43)= fa(SC_94, CC_93,CF_42);
	tie(SF_44, CF_44)= fa(SC_95, CC_94,CF_43);
	tie(SF_45, CF_45)= fa(SC_96, CC_95,CF_44);
	tie(SF_46, CF_46)= fa(SF_18, CC_96,CF_45);
	tie(SF_47, CF_47)= fa(SH_20, CF_18,CF_46);
	tie(SF_48, CF_48)= fa(SH_21, CH_20,CF_47);
	tie(SF_49, CF_49)= fa(SH_22, CH_21,CF_48);
	tie(SF_50, CF_50)= fa(SH_23, CH_22,CF_49);
	tie(SF_51, CF_51)= fa(SH_24, CH_23,CF_50);
	tie(SF_52, CF_52)= fa(SH_25, CH_24,CF_51);
	tie(SF_53, CF_53)= fa(CH_25, CH_14,CF_52);

	cout<<SC_27<< CC_26<< CO_69<<endl;
	cout<<SF_11<<endl;
	cout<<CF_11<<endl;
	sum = sum
		  |(SF_53<< 31)
		  |(SF_52<< 30)
		  |(SF_51<< 29)
		  |(SF_50<< 28)
		  |(SF_49<< 27)
		  |(SF_48<< 26)
		  |(SF_47<< 25)
		  |(SF_46<< 24)
		  |(SF_45<< 23)
		  |(SF_44<< 22)
		  |(SF_43<< 21)
		  |(SF_42<< 20)
		  |(SF_41<< 19)
		  |(SF_40<< 18)
		  |(SF_39<< 17)
		  |(SF_38<< 16)
		  |(SF_37<< 15)
		  |(SF_36<< 14)
		  |(SF_35<< 13)
		  |(SF_34<< 12)
		  |(SF_33<< 11)
		  |(SF_32<< 10)
		  |(SF_31<< 9)
		  |(SF_30<< 8)
		  |(SF_29<< 7)
		  |(SF_28<< 6)
		  |(SF_27<< 5)
		  |(SF_26<< 4)
		  |(SH_15<< 3)
		  | (SH_5<< 2)
		  | (SH_1<< 1)
		  |( P_0_0<< 0);

    return sum;
}











